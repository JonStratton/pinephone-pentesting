#!/bin/sh

install()
{
# Install the base packages with apt, not pip
sudo DEBIAN_FRONTEND=noninteractive apt-get install -y python3-tk python3-netaddr

# Create wifi-deauth group for sudo access
sudo groupadd wifi-deauth
sudo usermod -a -G wifi-deauth $USER

# sudo file for easy install and delete
sudo sh -c '( echo "Cmnd_Alias WIFIDEAUTH = /usr/sbin/iwlist * scan, /usr/sbin/aireplay-ng -0 ? -a * *
%wifi-deauth ALL=NOPASSWD: WIFIDEAUTH" > /etc/sudoers.d/wifi-deauth-sudoers )'
# newgrp wifi-deauth

sudo cp deauth.py /usr/local/bin/

# GUI Launcher
sudo sh -c '( echo "[Desktop Entry]
Type=Application
Encoding=UTF-8
Name=Deauth
Comment=Deauth(GUI)
Exec=/usr/local/bin/deauth.py
Terminal=false
Categories=Tags;Describing;Application" > /usr/share/applications/deauth.desktop )'
}

uninstall()
{
sudo rm /usr/share/applications/deauth.desktop
sudo rm /usr/local/bin/deauth.py
sudo groupdel wifi-deauth
sudo rm /etc/sudoers.d/wifi-deauth-sudoers
}

if [ $1 -a $1 = 'uninstall' ]; then
   uninstall
else
   install
fi
